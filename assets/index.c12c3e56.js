import{k as u,bl as I,v as R,w,am as j,o as c,c as x,p as s,x as r,C as b,z as d,q as t,bd as E,F as k,a as P,A as O,b0 as V,be as T,b4 as F,j as H,b as _,m as a,H as J,E as S,an as W,ar as q,az as L}from"./index.0f395c90.js";import{_ as M}from"./CreateReportDialog.5177ee30.js";import{V as U}from"./VBtn.609113ec.js";import{V as G,a as K,b as Q,c as X}from"./VTabs.539fc03b.js";import{V as Y,a as Z}from"./VTable.e8f87133.js";import"./VTextarea.b27d989b.js";import"./VCounter.3b11b0ca.js";import"./VDialog.1621901b.js";import"./dialog-transition.8fb3264c.js";const ee=a("thead",null,[a("tr",null,[a("th",{scope:"col",class:"text-subtitle-2 text-wrap"}," # "),a("th",{scope:"col",class:"text-subtitle-2 text-wrap"}," \u0421\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u0435 "),a("th",{scope:"col",class:"text-subtitle-2 text-wrap"}," \u0421\u0442\u0430\u0442\u0443\u0441 "),a("th",{scope:"col",class:"text-subtitle-2 text-wrap"}," \u0414\u0430\u0442\u0430 \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u044F "),a("th",{scope:"col",class:"text-subtitle-2 text-wrap"}," \u0414\u0430\u0442\u0430 \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u044F "),a("th",{scope:"col",class:"text-subtitle-2 text-wrap"}," \u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044F ")])],-1),te={class:"text-high-emphasis"},ae={class:"text-high-emphasis"},le={class:"text-high-emphasis"},se={class:"text-high-emphasis"},oe={class:"text-high-emphasis"},ne={class:"text-high-emphasis"},ue={colspan:"8",class:"text-center text-body-1 justify-center align-center"},re={class:"text-sm text-disabled"},Ve={__name:"index",setup(ie){const v=u("Pending"),g=u(!1),C=u([{name:"Pending",value:"Pending"},{name:"Declined",value:"Declined"},{name:"Accepted",value:"Accepted"}]);H();const $=I();R();const i=u(null),D=u(10),m=u(1),y=u(1),z=u(0),B=u({}),f=u({message:"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043C \u0434\u0430\u043D\u043D\u044B\u0435...",status:0}),h=u({enabled:!1,type:"success",message:"Hello!"}),p=u({});w(()=>{i.value===null?f.value={message:"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043C \u0434\u0430\u043D\u043D\u044B\u0435...",status:0}:i.value.length===0&&(f.value={message:"\u041D\u0435\u0442 \u0434\u0430\u043D\u043D\u044B\u0445",status:2})}),w(()=>{i.value=null,$.fetchItems({state:v.value}).then(o=>{i.value=o.data,B.value=o.data.length>0?o.data[0]:null}).catch(o=>{h.value={enabled:!0,message:o,type:"error"},console.log(o)})}),w(()=>{m.value>y.value&&(m.value=y.value)});const N=j(()=>{const o=i.value&&i.value.length?(m.value-1)*D.value+1:0,e=i.value?i.value.length+(m.value-1)*D.value:0;return`\u041F\u043E\u043A\u0430\u0437\u0430\u043D\u044B \u0441 ${o} \u043F\u043E ${e} \u0438\u0437 ${z.value} \u0441\u0442\u0440\u043E\u043A`}),A=o=>{let e="";return typeof o=="string"?e=o:e=new Date(o*1e3).toISOString(),e.slice(0,-5).replaceAll("T"," ").replaceAll("-",".")};return w(()=>{console.log(p.value),p.value=g.value?p.value:{},console.log(p.value)}),(o,e)=>(c(),x("div",null,[s(E,{modelValue:t(h).enabled,"onUpdate:modelValue":e[0]||(e[0]=l=>t(h).enabled=l),location:"top end",variant:"flat",color:t(h).type},{default:r(()=>[b(d(t(h).message),1)]),_:1},8,["modelValue","color"]),s(G,{modelValue:t(v),"onUpdate:modelValue":e[2]||(e[2]=l=>V(v)?v.value=l:null),class:"mb-1"},{default:r(()=>[(c(!0),x(k,null,P(t(C),l=>(c(),_(Q,{key:l.value,value:l.value},{default:r(()=>[b(d(l.name),1)]),_:2},1032,["value"]))),128)),s(O),s(U,{"append-icon":"tabler-plus",onClick:e[1]||(e[1]=l=>g.value=!0)},{default:r(()=>[b(" \u0421\u043E\u0437\u0434\u0430\u0442\u044C ")]),_:1})]),_:1},8,["modelValue"]),s(F,{flat:""},{default:r(()=>[s(T,null,{default:r(()=>[s(K,{modelValue:t(v),"onUpdate:modelValue":e[4]||(e[4]=l=>V(v)?v.value=l:null)},{default:r(()=>[(c(!0),x(k,null,P(t(C),l=>(c(),_(X,{key:l.value,value:l.value},{default:r(()=>[s(Y,{class:"text-no-wrap pb-5"},{default:r(()=>[ee,a("tbody",null,[(c(!0),x(k,null,P(t(i),n=>(c(),x("tr",{key:n.id,style:{height:"3.5rem"}},[a("td",te,d(n.id),1),a("td",ae,d(n.message.slice(0,100))+" "+d(n.message.length>100?"...":""),1),a("td",le,[s(J,{variant:"tonal",color:n.state==="Accepted"?"success":n.state==="Pending"?"warning":"error"},{default:r(()=>[b(d(n.state),1)]),_:2},1032,["color"])]),a("td",se,d(A(n.time_modified)),1),a("td",oe,d(A(n.time_created)),1),a("td",ne,[s(U,{icon:"",size:"x-small",color:"default",variant:"text",onClick:ce=>{g.value=!0,p.value=JSON.parse(JSON.stringify(n))}},{default:r(()=>[s(S,{size:"22",icon:"tabler-eye"})]),_:2},1032,["onClick"])])]))),128))]),W(a("tfoot",null,[a("tr",null,[a("td",ue,[b(d(t(f).message)+" ",1),t(f).status===0?(c(),_(q,{key:0,width:3,color:"primary",indeterminate:""})):t(f).status===1?(c(),_(S,{key:1,color:"success",icon:"tabler-tick"})):(c(),_(S,{key:2,color:"error",icon:"tabler-x"}))])])],512),[[L,!t(i)||!t(i).length]])]),_:1}),s(T,{class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3"},{default:r(()=>[a("span",re,d(t(N)),1),s(Z,{modelValue:t(m),"onUpdate:modelValue":e[3]||(e[3]=n=>V(m)?m.value=n:null),size:"small","total-visible":4,length:t(y)},null,8,["modelValue","length"])]),_:1})]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),s(M,{isDialogVisible:t(g),"onUpdate:isDialogVisible":e[5]||(e[5]=l=>V(g)?g.value=l:null),report:t(p),"onUpdate:report":e[6]||(e[6]=l=>V(p)?p.value=l:null)},null,8,["isDialogVisible","report"])]))}};export{Ve as default};
