import{m as ie}from"./VSelect.28e9d127.js";import{ah as re,a8 as C,q as se,bv as ae,aC as ce,a2 as ve,a3 as fe,P as de,U as me,k as P,a5 as q,W as he,ac as $,bh as Z,K as ne,p as n,F as W,H as E,ae as ge,B as xe,ag as ue,I as ye,bD as be,bo as ke,ai as Ve,bj as Ce,a0 as te,aA as Fe,bH as Ie,bF as we,aQ as Pe,bu as _e}from"./index.06ce4c3e.js";import{u as pe,t as Y,V as Se,a as le}from"./VList.db187d07.js";import{a as De,b as Ae,c as Me,m as Re,h as Te,u as Be,f as Ke,i as $e,j as Le,k as Ne,V as Oe}from"./VTextField.ce54915a.js";import{V as He}from"./VMenu.c95eb43d.js";import{a as je}from"./VCheckboxBtn.04eae92e.js";import{V as Ee}from"./VChip.a4563941.js";const Ue=(e,c,l)=>e==null||c==null?-1:e.toString().toLocaleLowerCase().indexOf(c.toString().toLocaleLowerCase()),ze=re({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function Ge(e,c,l){var y,v;const T=[],u=(y=l==null?void 0:l.default)!=null?y:Ue,m=l!=null&&l.filterKeys?ae(l.filterKeys):!1,h=Object.keys((v=l==null?void 0:l.customKeyFilter)!=null?v:{}).length;if(!(e!=null&&e.length))return T;e:for(let a=0;a<e.length;a++){const k=e[a],_={},F={};let b=-1;if(c&&!(l!=null&&l.noFilter)){if(typeof k=="object"){const f=m||Object.keys(k);for(const g of f){var x;const d=ce(k,g,k),S=l==null||(x=l.customKeyFilter)==null?void 0:x[g];if(b=S?S(d,c,k):u(d,c,k),b!==-1&&b!==!1)S?_[g]=b:F[g]=b;else if((l==null?void 0:l.filterMode)==="every")continue e}}else b=u(k,c,k),b!==-1&&b!==!1&&(F.title=b);const p=Object.keys(F).length,L=Object.keys(_).length;if(!p&&!L||(l==null?void 0:l.filterMode)==="union"&&L!==h&&!p||(l==null?void 0:l.filterMode)==="intersection"&&(L!==h||!p))continue}T.push({index:a,matches:{...F,..._}})}return T}function Qe(e,c,l){const T=C(()=>typeof(l==null?void 0:l.value)!="string"&&typeof(l==null?void 0:l.value)!="number"?"":String(l.value));return{filteredItems:C(()=>{const m=se(c);return Ge(m,T.value,{customKeyFilter:e.customKeyFilter,default:e.customFilter,filterKeys:e.filterKeys,filterMode:e.filterMode,noFilter:e.noFilter}).map(x=>{let{index:y,matches:v}=x;return{item:m[y],matches:v}})})}}function We(e,c,l){if(Array.isArray(c))throw new Error("Multiple matches is not implemented");return typeof c=="number"&&~c?n(W,null,[n("span",{class:"v-combobox__unmask"},[e.substr(0,c)]),n("span",{class:"v-combobox__mask"},[e.substr(c,l)]),n("span",{class:"v-combobox__unmask"},[e.substr(c+l)])]):e}const lt=ve()({name:"VCombobox",props:{delimiters:Array,...ze({filterKeys:["title"]}),...ie({hideNoData:!0,returnObject:!0}),...fe(De({modelValue:null}),["validationValue","dirty","appendInnerIcon"]),...de({transition:!1})},emits:{"update:modelValue":e=>!0,"update:search":e=>!0,"update:menu":e=>!0},setup(e,c){var H;var l;let{emit:T,slots:u}=c;const{t:m}=me(),h=P(),x=P(!1),y=P(!0),v=q(e,"menu"),a=P(-1),k=C(()=>{var t;return(t=h.value)==null?void 0:t.color}),{items:_,transformIn:F,transformOut:b}=pe(e),{textColorClasses:p,textColorStyles:L}=he(k),f=q(e,"modelValue",[],t=>F(ae(t||[])),t=>{var i;const r=b(t);return e.multiple?r:(i=r[0])!=null?i:null}),g=P(e.multiple?"":(H=(l=f.value[0])==null?void 0:l.title)!=null?H:""),d=C({get:()=>g.value,set:t=>{var r;if(g.value=t,e.multiple||(f.value=[Y(e,t)]),t&&e.multiple&&(r=e.delimiters)!=null&&r.length){const i=t.split(new RegExp(`(?:${e.delimiters.join("|")})+`));i.length>1&&(i.forEach(V=>{V=V.trim(),V&&w(Y(e,V))}),g.value="")}t||(a.value=-1),x.value&&(v.value=!0),y.value=!t}});$(g,t=>{T("update:search",t)}),$(f,t=>{var i;if(!e.multiple){var r;g.value=(i=(r=t[0])==null?void 0:r.title)!=null?i:""}});const{filteredItems:S}=Qe(e,_,C(()=>y.value?void 0:d.value)),N=C(()=>f.value.map(t=>_.value.find(r=>r.value===t.value)||t)),D=C(()=>N.value.map(t=>t.props.value)),B=C(()=>N.value[a.value]),O=P();function o(t){f.value=[],e.openOnClear&&(v.value=!0)}function I(){e.hideNoData&&!_.value.length||e.readonly||(v.value=!0)}function A(t){if(e.readonly)return;const r=h.value.selectionStart,i=D.value.length;if(a.value>-1&&t.preventDefault(),["Enter","ArrowDown"].includes(t.key)&&(v.value=!0),["Escape"].includes(t.key)&&(v.value=!1),["Enter","Escape","Tab"].includes(t.key)&&(y.value=!0),t.key==="ArrowDown"){var V;t.preventDefault(),(V=O.value)==null||V.focus("next")}else if(t.key==="ArrowUp"){var j;t.preventDefault(),(j=O.value)==null||j.focus("prev")}if(!!e.multiple){if(["Backspace","Delete"].includes(t.key)){if(a.value<0){t.key==="Backspace"&&!d.value&&(a.value=i-1);return}w(B.value),Z(()=>!B.value&&(a.value=i-2))}if(t.key==="ArrowLeft"){if(a.value<0&&r>0)return;const s=a.value>-1?a.value-1:i-1;N.value[s]?a.value=s:(a.value=-1,h.value.setSelectionRange(d.value.length,d.value.length))}if(t.key==="ArrowRight"){if(a.value<0)return;const s=a.value+1;N.value[s]?a.value=s:(a.value=-1,h.value.setSelectionRange(0,0))}t.key==="Enter"&&(w(Y(e,d.value)),d.value="")}}function M(){x.value&&(y.value=!0)}function w(t){if(e.multiple){const r=D.value.findIndex(i=>i===t.value);if(r===-1)f.value=[...f.value,t];else{const i=[...f.value];i.splice(r,1),f.value=i}d.value=""}else f.value=[t],g.value=t.title,Z(()=>{v.value=!1,y.value=!0})}function z(t){x.value=!0}function G(t){if(t.relatedTarget==null){var r;(r=h.value)==null||r.focus()}}return $(S,t=>{!t.length&&e.hideNoData&&(v.value=!1)}),$(x,t=>{if(t)a.value=-1;else{if(v.value=!1,!e.multiple||!d.value)return;f.value=[...f.value,Y(e,d.value)],d.value=""}}),ne(()=>{const t=!!(e.chips||u.chip),[r]=Ae(e);return n(Me,E({ref:h},r,{modelValue:d.value,"onUpdate:modelValue":[i=>d.value=i,i=>{i==null&&(f.value=[])}],validationValue:f.externalValue,dirty:f.value.length>0,class:["v-combobox",{"v-combobox--active-menu":v.value,"v-combobox--chips":!!e.chips,"v-combobox--selecting-index":a.value>-1,[`v-combobox--${e.multiple?"multiple":"single"}`]:!0}],appendInnerIcon:e.items.length?e.menuIcon:void 0,readonly:e.readonly,"onClick:clear":o,"onClick:control":I,"onClick:input":I,onFocus:()=>x.value=!0,onBlur:()=>x.value=!1,onKeydown:A}),{...u,default:()=>{var i,V,j;return n(W,null,[n(He,E({modelValue:v.value,"onUpdate:modelValue":s=>v.value=s,activator:"parent",contentClass:"v-combobox__content",eager:e.eager,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:M},e.menuProps),{default:()=>[n(Se,{ref:O,selected:D.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:s=>s.preventDefault(),onFocusin:z,onFocusout:G},{default:()=>{var s;return[!S.value.length&&!e.hideNoData&&((s=(i=u["no-data"])==null?void 0:i.call(u))!=null?s:n(le,{title:m(e.noDataText)},null)),(V=u["prepend-item"])==null?void 0:V.call(u),S.value.map((K,U)=>{var ee;var Q;let{item:R,matches:oe}=K;return(ee=(Q=u.item)==null?void 0:Q.call(u,{item:R,index:U,props:E(R.props,{onClick:()=>w(R)})}))!=null?ee:n(le,E({key:U},R.props,{onClick:()=>w(R)}),{prepend:J=>{let{isSelected:X}=J;return e.multiple&&!e.hideSelected?n(je,{modelValue:X,ripple:!1},null):void 0},title:()=>{var X;var J;return y.value?R.title:We(R.title,oe.title,(X=(J=d.value)==null?void 0:J.length)!=null?X:0)}})}),(j=u["append-item"])==null?void 0:j.call(u)]}})]}),N.value.map((s,K)=>{function U(R){R.stopPropagation(),R.preventDefault(),w(s)}const Q={"onClick:close":U,modelValue:!0,"onUpdate:modelValue":void 0};return n("div",{key:s.value,class:["v-combobox__selection",K===a.value&&["v-combobox__selection--selected",p.value]],style:K===a.value?L.value:{}},[t?n(ge,{defaults:{VChip:{closable:e.closableChips,size:"small",text:s.title}}},{default:()=>[u.chip?u.chip({item:s,index:K,props:Q}):n(Ee,Q,null)]}):u.selection?u.selection({item:s,index:K}):n("span",{class:"v-combobox__selection-text"},[s.title,e.multiple&&K<N.value.length-1&&n("span",{class:"v-combobox__selection-comma"},[xe(",")])])])})])}})}),ue({isFocused:x,isPristine:y,menu:v,search:d,selectionIndex:a,filteredItems:S,select:w},h)}});const at=ye({name:"VTextarea",directives:{Intersect:be},inheritAttrs:!1,props:{autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,hint:String,persistentHint:Boolean,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,...Re(),...Te()},emits:{"click:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,c){let{attrs:l,emit:T,slots:u}=c;const m=q(e,"modelValue"),{isFocused:h,focus:x,blur:y}=Be(e),v=C(()=>typeof e.counterValue=="function"?e.counterValue(m.value):(m.value||"").toString().length),a=C(()=>{if(l.maxlength)return l.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter});function k(o,I){var A,M;!e.autofocus||!o||(A=I[0].target)==null||(M=A.focus)==null||M.call(A)}const _=P(),F=P(),b=P(""),p=P(),L=C(()=>h.value||e.persistentPlaceholder),f=C(()=>e.messages.length?e.messages:L.value||e.persistentHint?e.hint:"");function g(){if(p.value!==document.activeElement){var o;(o=p.value)==null||o.focus()}h.value||x()}function d(o){g(),T("click:control",o)}function S(o){o.stopPropagation(),g(),Z(()=>{m.value="",we(e["onClick:clear"],o)})}function N(o){m.value=o.target.value}const D=P();function B(){!e.autoGrow||Z(()=>{if(!D.value||!F.value)return;const o=getComputedStyle(D.value),I=getComputedStyle(F.value.$el),A=parseFloat(o.getPropertyValue("--v-field-padding-top"))+parseFloat(o.getPropertyValue("--v-input-padding-top"))+parseFloat(o.getPropertyValue("--v-field-padding-bottom")),M=D.value.scrollHeight,w=parseFloat(o.lineHeight),z=Math.max(parseFloat(e.rows)*w+A,parseFloat(I.getPropertyValue("--v-input-control-height"))),G=parseFloat(e.maxRows)*w+A||1/0;b.value=Pe(_e(M!=null?M:0,z,G))})}ke(B),$(m,B),$(()=>e.rows,B),$(()=>e.maxRows,B),$(()=>e.density,B);let O;return $(D,o=>{if(o)O=new ResizeObserver(B),O.observe(D.value);else{var I;(I=O)==null||I.disconnect()}}),Ve(()=>{var o;(o=O)==null||o.disconnect()}),ne(()=>{const o=!!(u.counter||e.counter||e.counterValue),I=!!(o||u.details),[A,M]=Ce(l),[{modelValue:w,...z}]=Ke(e),[G]=$e(e);return n(Oe,E({ref:_,modelValue:m.value,"onUpdate:modelValue":H=>m.value=H,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-text-field--flush-details":["plain","underlined"].includes(e.variant)}],"onClick:prepend":e["onClick:prepend"],"onClick:append":e["onClick:append"]},A,z,{focused:h.value,messages:f.value}),{...u,default:H=>{let{isDisabled:t,isDirty:r,isReadonly:i,isValid:V}=H;return n(Le,E({ref:F,style:{"--v-textarea-control-height":b.value},"onClick:control":d,"onClick:clear":S,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"],role:"textbox"},G,{active:L.value||r.value,dirty:r.value||e.dirty,focused:h.value,error:V.value===!1}),{...u,default:j=>{let{props:{class:s,...K}}=j;return n(W,null,[e.prefix&&n("span",{class:"v-text-field__prefix"},[e.prefix]),te(n("textarea",E({ref:p,class:s,value:m.value,onInput:N,autofocus:e.autofocus,readonly:i.value,disabled:t.value,placeholder:e.placeholder,rows:e.rows,name:e.name,onFocus:g,onBlur:y},K,M),null),[[Fe("intersect"),{handler:k},null,{once:!0}]]),e.autoGrow&&te(n("textarea",{class:[s,"v-textarea__sizer"],"onUpdate:modelValue":U=>m.value=U,ref:D,readonly:!0,"aria-hidden":"true"},null),[[Ie,m.value]]),e.suffix&&n("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:I?H=>{var t;return n(W,null,[(t=u.details)==null?void 0:t.call(u,H),o&&n(W,null,[n("span",null,null),n(Ne,{active:e.persistentCounter||h.value,value:v.value,max:a.value},u.counter)])])}:void 0})}),ue({},_,F,p)}});export{lt as V,at as a};
