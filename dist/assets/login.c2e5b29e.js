import{R as F,bq as T,bF as U,bs as D,bG as S,aw as j,a6 as q,bu as N,bv as H,bH as L,p as t,bI as z,O as x,bA as E,k as m,v as G,o as M,c as O,x as s,C as f,z as g,q as a,ax as J,m as p,an as K,V as Q,y as h,ao as W,ay as k,aT as X,aq as Y,ar as y,aU as w,D as Z,am as ee,j as ae,r as te}from"./index.209d9e67.js";import{r as C,p as se}from"./validators.118248dd.js";import{b as A}from"./route-block.023af118.js";import{V as oe}from"./VForm.aac9c2cf.js";const le=F({name:"VCheckbox",inheritAttrs:!1,props:{...T(),...U()},emits:{"update:focused":d=>!0},setup(d,l){let{attrs:n,slots:r}=l;const{isFocused:b,focus:u,blur:i}=D(d),V=S(),_=j(()=>d.id||`checkbox-${V}`);return q(()=>{const[e,c]=N(n),[o,v]=H(d),[$,fe]=L(d);return t(E,x({class:"v-checkbox"},e,o,{id:_.value,focused:b.value}),{...r,default:B=>{let{id:P,isDisabled:R,isReadonly:I}=B;return t(z,x($,{id:P.value,disabled:R.value,readonly:I.value},c,{onFocus:u,onBlur:i}),r)}})}),{}}});const ne={class:"auth-wrapper d-flex justify-center align-center pa-md-4"},re={class:"position-relative"},de={class:"d-flex"},ue=p("h5",{class:"text-h5 font-weight-semibold mb-1"}," \u0414\u043E\u0431\u0440\u043E \u043F\u043E\u0436\u0430\u043B\u043E\u0432\u0430\u0442\u044C! ",-1),ie=p("p",{class:"mb-0"}," \u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430 \u0430\u0432\u0442\u043E\u0440\u0438\u0437\u0443\u0439\u0442\u0435\u0441\u044C, \u0447\u0442\u043E\u0431\u044B \u043D\u0430\u0447\u0430\u0442\u044C \u0437\u0430\u0431\u043E\u0442\u0438\u0442\u044C\u0441\u044F \u043E \u043F\u0440\u0438\u0440\u043E\u0434\u0435 ",-1),ce={class:"d-flex align-center justify-space-between flex-wrap mt-2 mb-4"},pe=p("span",null,"\u041D\u0435\u0442 \u0430\u043A\u043A\u0430\u0443\u043D\u0442\u0430?",-1),me={__name:"login",setup(d){const l=m({enabled:!1,type:"success",message:"Hello!"}),n=m({username:"",password:"",stay_signed:!1}),r=m(!1),b=ae(),u=G(),i=m(),V=async()=>{var c,o;if(!(await((c=i==null?void 0:i.value)==null?void 0:c.validate())).valid){l.value={enabled:!0,type:"error",message:"\u041F\u0440\u043E\u0432\u0435\u0440\u044C\u0442\u0435 \u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u043E\u0441\u0442\u044C \u0437\u0430\u043F\u043E\u043B\u043D\u0435\u043D\u0438\u044F \u0432\u0441\u0435\u0445 \u043F\u043E\u043B\u0435\u0439!"};return}let e;try{if(e=await u.login(n.value),console.log(e.status),!e.data||!((o=e.data)!=null&&o.access)){l.value={enabled:!0,message:`\u041E\u0448\u0438\u0431\u043A\u0430 \u0432\u0445\u043E\u0434\u0430: ${e.data}`,type:"error"};return}}catch(v){l.value={enabled:!0,message:v.data,type:"error"};return}if(u.$state.authData={access:`${e.data.access}`,refresh:`${e.data.refresh}`},e=await u.me(),e.data.error){console.log("AAA"),l.value={enabled:!0,message:`\u041E\u0448\u0438\u0431\u043A\u0430 \u0432\u0445\u043E\u0434\u0430: ${e.data}`,type:"error"};return}u.$state.userData={...e.data},l.value={enabled:!0,type:"success",message:"\u0412\u044B \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0432\u043E\u0448\u043B\u0438!"},setTimeout(()=>{b.push({name:"index"})},1e3)};return(_,e)=>{const c=te("RouterLink");return M(),O("div",ne,[t(J,{modelValue:a(l).enabled,"onUpdate:modelValue":e[0]||(e[0]=o=>a(l).enabled=o),location:"bottom end",variant:"flat",color:a(l).type},{default:s(()=>[f(g(a(l).message),1)]),_:1},8,["modelValue","color"]),p("div",re,[t(ee,{class:"auth-card pa-4","max-width":"448"},{default:s(()=>[t(K,{class:"justify-center"},{prepend:s(()=>[p("div",de,[t(a(Q),{nodes:a(h).app.logo},null,8,["nodes"])])]),default:s(()=>[t(W,{class:"font-weight-bold text-h5 py-1"},{default:s(()=>[f(g(a(h).app.title),1)]),_:1})]),_:1}),t(k,{class:"pt-1"},{default:s(()=>[ue,ie]),_:1}),t(k,null,{default:s(()=>[t(oe,{ref_key:"refForm",ref:i,onSubmit:e[5]||(e[5]=X(()=>{},["prevent"]))},{default:s(()=>[t(Y,null,{default:s(()=>[t(y,{cols:"12"},{default:s(()=>[t(w,{modelValue:a(n).username,"onUpdate:modelValue":e[1]||(e[1]=o=>a(n).username=o),label:"\u0418\u043C\u044F \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F",type:"text",rules:[a(C)]},null,8,["modelValue","rules"])]),_:1}),t(y,{cols:"12"},{default:s(()=>[t(w,{modelValue:a(n).password,"onUpdate:modelValue":e[2]||(e[2]=o=>a(n).password=o),label:"\u041F\u0430\u0440\u043E\u043B\u044C",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043F\u0430\u0440\u043E\u043B\u044C",type:a(r)?"text":"password",rules:[a(C),a(se)],autocomplete:"on","append-inner-icon":a(r)?"tabler-eye-off":"tabler-eye","onClick:appendInner":e[3]||(e[3]=o=>r.value=!a(r))},null,8,["modelValue","type","rules","append-inner-icon"]),p("div",ce,[t(le,{modelValue:a(n).stay_signed,"onUpdate:modelValue":e[4]||(e[4]=o=>a(n).stay_signed=o),label:"\u0417\u0430\u043F\u043E\u043C\u043D\u0438\u0442\u044C \u043C\u0435\u043D\u044F"},null,8,["modelValue"])]),t(Z,{block:"",type:"submit",onClick:V},{default:s(()=>[f(" \u0412\u043E\u0439\u0442\u0438 ")]),_:1})]),_:1}),t(y,{cols:"12",class:"text-center text-base"},{default:s(()=>[pe,t(c,{class:"text-primary ms-2",to:{name:"auth-register"}},{default:s(()=>[f(" \u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043E\u0432\u0430\u0442\u044C\u0441\u044F ")]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})])])}}};typeof A=="function"&&A(me);export{me as default};
