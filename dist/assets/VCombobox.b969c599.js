import{m as te,f as ne,V as ae}from"./VTextField.f210f95e.js";import{m as Ve,u as ue,V as oe,a as J,t as Q}from"./VList.9335d3c1.js";import{aL as ie,a6 as xe,a0 as se,aA as re,as as ce,au as ve,k as K,aC as W,am as w,$ as de,p as o,F as Y,I as B,aq as fe,H as me,C as he,aK as pe,bF as Z,q as Fe,aR as Ie,av as De,a3 as G,a4 as le}from"./index.17329d69.js";import{V as _e}from"./dialog-transition.d34d8819.js";import{V as ye}from"./VMenu.3c4205a5.js";import{V as ge}from"./VCheckboxBtn.670cee37.js";const ke=ie({chips:Boolean,closableChips:Boolean,eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,menu:Boolean,menuIcon:{type:xe,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,...Ve({itemChildren:!1})},"v-select"),Ee=se()({name:"VSelect",props:{...ke(),...re(te({modelValue:null}),["validationValue","dirty","appendInnerIcon"]),...ce({transition:{component:_e}})},emits:{"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,v){let{slots:n}=v;const{t:S}=ve(),c=K(),h=W(e,"menu"),{items:y,transformIn:g,transformOut:k}=ue(e),a=W(e,"modelValue",[],t=>g(Z(t)),t=>{var s;const i=k(t);return e.multiple?i:(s=i[0])!=null?s:null}),u=w(()=>a.value.map(t=>y.value.find(i=>i.value===t.value)||t)),C=w(()=>u.value.map(t=>t.props.value)),b=K();function O(t){a.value=[],e.openOnClear&&(h.value=!0)}function V(){e.hideNoData&&!y.value.length||e.readonly||(h.value=!h.value)}function M(t){if(!e.readonly){if(["Enter","ArrowDown"," "].includes(t.key)&&(t.preventDefault(),h.value=!0),["Escape","Tab"].includes(t.key)&&(h.value=!1),t.key==="ArrowDown"){var i;(i=b.value)==null||i.focus("next")}else if(t.key==="ArrowUp"){var s;t.preventDefault(),(s=b.value)==null||s.focus("prev")}else if(t.key==="Home"){var P;t.preventDefault(),(P=b.value)==null||P.focus("first")}else if(t.key==="End"){var A;t.preventDefault(),(A=b.value)==null||A.focus("last")}}}function I(t){if(e.multiple){const i=C.value.findIndex(s=>s===t.value);if(i===-1)a.value=[...a.value,t];else{const s=[...a.value];s.splice(i,1),a.value=s}}else a.value=[t],h.value=!1}function f(t){var i;(i=b.value)!=null&&i.$el.contains(t.relatedTarget)||(h.value=!1)}function x(t){if(t.relatedTarget==null){var i;(i=c.value)==null||i.focus()}}return de(()=>{const t=!!(e.chips||n.chip),[i]=ne(e);return o(ae,B({ref:c},i,{modelValue:a.value.map(s=>s.props.value).join(", "),"onUpdate:modelValue":s=>{s==null&&(a.value=[])},validationValue:a.externalValue,dirty:a.value.length>0,class:["v-select",{"v-select--active-menu":h.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":a.value.length}],appendInnerIcon:e.menuIcon,readonly:!0,"onClick:clear":O,"onClick:control":V,onBlur:f,onKeydown:M}),{...n,default:()=>{var s,P,A;return o(Y,null,[o(ye,B({modelValue:h.value,"onUpdate:modelValue":p=>h.value=p,activator:"parent",contentClass:"v-select__content",eager:e.eager,openOnClick:!1,closeOnContentClick:!1,transition:e.transition},e.menuProps),{default:()=>[o(oe,{ref:b,selected:C.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:p=>p.preventDefault(),onFocusout:x},{default:()=>{var p;return[!y.value.length&&!e.hideNoData&&((p=(s=n["no-data"])==null?void 0:s.call(n))!=null?p:o(J,{title:S(e.noDataText)},null)),(P=n["prepend-item"])==null?void 0:P.call(n),y.value.map((F,L)=>{var E;var $;return(E=($=n.item)==null?void 0:$.call(n,{item:F,index:L,props:B(F.props,{onClick:()=>I(F)})}))!=null?E:o(J,B({key:L},F.props,{onClick:()=>I(F)}),{prepend:T=>{let{isSelected:X}=T;return e.multiple&&!e.hideSelected?o(ge,{modelValue:X,ripple:!1},null):void 0}})}),(A=n["append-item"])==null?void 0:A.call(n)]}})]}),u.value.map((p,F)=>{function L(E){E.stopPropagation(),E.preventDefault(),I(p)}const $={"onClick:close":L,modelValue:!0,"onUpdate:modelValue":void 0};return o("div",{key:p.value,class:"v-select__selection"},[t?o(fe,{defaults:{VChip:{closable:e.closableChips,size:"small",text:p.title}}},{default:()=>[n.chip?n.chip({item:p,index:F,props:$}):o(me,$,null)]}):n.selection?n.selection({item:p,index:F}):o("span",{class:"v-select__selection-text"},[p.title,e.multiple&&F<u.value.length-1&&o("span",{class:"v-select__selection-comma"},[he(",")])])])})])}})}),pe({menu:h,select:I},c)}}),we=(e,v,n)=>e==null||v==null?-1:e.toString().toLocaleLowerCase().indexOf(v.toString().toLocaleLowerCase()),Se=ie({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function Pe(e,v,n){var k,a;const S=[],c=(k=n==null?void 0:n.default)!=null?k:we,h=n!=null&&n.filterKeys?Z(n.filterKeys):!1,y=Object.keys((a=n==null?void 0:n.customKeyFilter)!=null?a:{}).length;if(!(e!=null&&e.length))return S;e:for(let u=0;u<e.length;u++){const C=e[u],b={},O={};let V=-1;if(v&&!(n!=null&&n.noFilter)){if(typeof C=="object"){const f=h||Object.keys(C);for(const x of f){var g;const t=Ie(C,x,C),i=n==null||(g=n.customKeyFilter)==null?void 0:g[x];if(V=i?i(t,v,C):c(t,v,C),V!==-1&&V!==!1)i?b[x]=V:O[x]=V;else if((n==null?void 0:n.filterMode)==="every")continue e}}else V=c(C,v,C),V!==-1&&V!==!1&&(O.title=V);const M=Object.keys(O).length,I=Object.keys(b).length;if(!M&&!I||(n==null?void 0:n.filterMode)==="union"&&I!==y&&!M||(n==null?void 0:n.filterMode)==="intersection"&&(I!==y||!M))continue}S.push({index:u,matches:{...O,...b}})}return S}function Te(e,v,n){const S=w(()=>typeof(n==null?void 0:n.value)!="string"&&typeof(n==null?void 0:n.value)!="number"?"":String(n.value));return{filteredItems:w(()=>{const h=Fe(v);return Pe(h,S.value,{customKeyFilter:e.customKeyFilter,default:e.customFilter,filterKeys:e.filterKeys,filterMode:e.filterMode,noFilter:e.noFilter}).map(g=>{let{index:k,matches:a}=g;return{item:h[k],matches:a}})})}}function Oe(e,v,n){if(Array.isArray(v))throw new Error("Multiple matches is not implemented");return typeof v=="number"&&~v?o(Y,null,[o("span",{class:"v-combobox__unmask"},[e.substr(0,v)]),o("span",{class:"v-combobox__mask"},[e.substr(v,n)]),o("span",{class:"v-combobox__unmask"},[e.substr(v+n)])]):e}const je=se()({name:"VCombobox",props:{delimiters:Array,...Se({filterKeys:["title"]}),...ke({hideNoData:!0,returnObject:!0}),...re(te({modelValue:null}),["validationValue","dirty","appendInnerIcon"]),...ce({transition:!1})},emits:{"update:modelValue":e=>!0,"update:search":e=>!0,"update:menu":e=>!0},setup(e,v){var q;var n;let{emit:S,slots:c}=v;const{t:h}=ve(),y=K(),g=K(!1),k=K(!0),a=W(e,"menu"),u=K(-1),C=w(()=>{var l;return(l=y.value)==null?void 0:l.color}),{items:b,transformIn:O,transformOut:V}=ue(e),{textColorClasses:M,textColorStyles:I}=De(C),f=W(e,"modelValue",[],l=>O(Z(l||[])),l=>{var r;const d=V(l);return e.multiple?d:(r=d[0])!=null?r:null}),x=K(e.multiple?"":(q=(n=f.value[0])==null?void 0:n.title)!=null?q:""),t=w({get:()=>x.value,set:l=>{var d;if(x.value=l,e.multiple||(f.value=[Q(e,l)]),l&&e.multiple&&(d=e.delimiters)!=null&&d.length){const r=l.split(new RegExp(`(?:${e.delimiters.join("|")})+`));r.length>1&&(r.forEach(D=>{D=D.trim(),D&&T(Q(e,D))}),x.value="")}l||(u.value=-1),g.value&&(a.value=!0),k.value=!l}});G(x,l=>{S("update:search",l)}),G(f,l=>{var r;if(!e.multiple){var d;x.value=(r=(d=l[0])==null?void 0:d.title)!=null?r:""}});const{filteredItems:i}=Te(e,b,w(()=>k.value?void 0:t.value)),s=w(()=>f.value.map(l=>b.value.find(d=>d.value===l.value)||l)),P=w(()=>s.value.map(l=>l.props.value)),A=w(()=>s.value[u.value]),p=K();function F(l){f.value=[],e.openOnClear&&(a.value=!0)}function L(){e.hideNoData&&!b.value.length||e.readonly||(a.value=!0)}function $(l){if(e.readonly)return;const d=y.value.selectionStart,r=P.value.length;if(u.value>-1&&l.preventDefault(),["Enter","ArrowDown"].includes(l.key)&&(a.value=!0),["Escape"].includes(l.key)&&(a.value=!1),["Enter","Escape","Tab"].includes(l.key)&&(k.value=!0),l.key==="ArrowDown"){var D;l.preventDefault(),(D=p.value)==null||D.focus("next")}else if(l.key==="ArrowUp"){var N;l.preventDefault(),(N=p.value)==null||N.focus("prev")}if(!!e.multiple){if(["Backspace","Delete"].includes(l.key)){if(u.value<0){l.key==="Backspace"&&!t.value&&(u.value=r-1);return}T(A.value),le(()=>!A.value&&(u.value=r-2))}if(l.key==="ArrowLeft"){if(u.value<0&&d>0)return;const m=u.value>-1?u.value-1:r-1;s.value[m]?u.value=m:(u.value=-1,y.value.setSelectionRange(t.value.length,t.value.length))}if(l.key==="ArrowRight"){if(u.value<0)return;const m=u.value+1;s.value[m]?u.value=m:(u.value=-1,y.value.setSelectionRange(0,0))}l.key==="Enter"&&(T(Q(e,t.value)),t.value="")}}function E(){g.value&&(k.value=!0)}function T(l){if(e.multiple){const d=P.value.findIndex(r=>r===l.value);if(d===-1)f.value=[...f.value,l];else{const r=[...f.value];r.splice(d,1),f.value=r}t.value=""}else f.value=[l],x.value=l.title,le(()=>{a.value=!1,k.value=!0})}function X(l){g.value=!0}function be(l){if(l.relatedTarget==null){var d;(d=y.value)==null||d.focus()}}return G(i,l=>{!l.length&&e.hideNoData&&(a.value=!1)}),G(g,l=>{if(l)u.value=-1;else{if(a.value=!1,!e.multiple||!t.value)return;f.value=[...f.value,Q(e,t.value)],t.value=""}}),de(()=>{const l=!!(e.chips||c.chip),[d]=ne(e);return o(ae,B({ref:y},d,{modelValue:t.value,"onUpdate:modelValue":[r=>t.value=r,r=>{r==null&&(f.value=[])}],validationValue:f.externalValue,dirty:f.value.length>0,class:["v-combobox",{"v-combobox--active-menu":a.value,"v-combobox--chips":!!e.chips,"v-combobox--selecting-index":u.value>-1,[`v-combobox--${e.multiple?"multiple":"single"}`]:!0}],appendInnerIcon:e.items.length?e.menuIcon:void 0,readonly:e.readonly,"onClick:clear":F,"onClick:control":L,"onClick:input":L,onFocus:()=>g.value=!0,onBlur:()=>g.value=!1,onKeydown:$}),{...c,default:()=>{var r,D,N;return o(Y,null,[o(ye,B({modelValue:a.value,"onUpdate:modelValue":m=>a.value=m,activator:"parent",contentClass:"v-combobox__content",eager:e.eager,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:E},e.menuProps),{default:()=>[o(oe,{ref:p,selected:P.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:m=>m.preventDefault(),onFocusin:X,onFocusout:be},{default:()=>{var m;return[!i.value.length&&!e.hideNoData&&((m=(r=c["no-data"])==null?void 0:r.call(c))!=null?m:o(J,{title:h(e.noDataText)},null)),(D=c["prepend-item"])==null?void 0:D.call(c),i.value.map((j,R)=>{var ee;var U;let{item:_,matches:Ce}=j;return(ee=(U=c.item)==null?void 0:U.call(c,{item:_,index:R,props:B(_.props,{onClick:()=>T(_)})}))!=null?ee:o(J,B({key:R},_.props,{onClick:()=>T(_)}),{prepend:z=>{let{isSelected:H}=z;return e.multiple&&!e.hideSelected?o(ge,{modelValue:H,ripple:!1},null):void 0},title:()=>{var H;var z;return k.value?_.title:Oe(_.title,Ce.title,(H=(z=t.value)==null?void 0:z.length)!=null?H:0)}})}),(N=c["append-item"])==null?void 0:N.call(c)]}})]}),s.value.map((m,j)=>{function R(_){_.stopPropagation(),_.preventDefault(),T(m)}const U={"onClick:close":R,modelValue:!0,"onUpdate:modelValue":void 0};return o("div",{key:m.value,class:["v-combobox__selection",j===u.value&&["v-combobox__selection--selected",M.value]],style:j===u.value?I.value:{}},[l?o(fe,{defaults:{VChip:{closable:e.closableChips,size:"small",text:m.title}}},{default:()=>[c.chip?c.chip({item:m,index:j,props:U}):o(me,U,null)]}):c.selection?c.selection({item:m,index:j}):o("span",{class:"v-combobox__selection-text"},[m.title,e.multiple&&j<s.value.length-1&&o("span",{class:"v-combobox__selection-comma"},[he(",")])])])})])}})}),pe({isFocused:g,isPristine:k,menu:a,search:t,selectionIndex:u,filteredItems:i,select:T},y)}});export{Ee as V,je as a};
