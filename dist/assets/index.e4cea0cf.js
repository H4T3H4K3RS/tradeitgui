import{k as p,bl as E,v as L,w,am as F,o as t,c as v,p as s,x as e,C as d,z as x,q as a,bd as H,F as b,a as C,b0 as T,be as $,b4 as W,j as q,r as A,b as u,m as o,aY as P,H as h,E as k,an as J,ar as M,az as Y}from"./index.26b889da.js";import{V as G,a as K,b as Q,c as X}from"./VTabs.db40599f.js";import{V as Z,a as ee}from"./VTable.ab3b157f.js";import{V as B}from"./VBtn.90aa23f0.js";const te=o("th",{scope:"col",class:"text-subtitle-2 text-wrap"}," # ",-1),ae=o("th",{scope:"col",class:"text-subtitle-2 text-wrap"}," \u041E\u0442\u0434\u0430\u043D\u043D\u044B\u0439 \u041F\u0440\u0435\u0434\u043C\u0435\u0442 ",-1),le=o("th",{scope:"col",class:"text-subtitle-2 text-wrap"}," \u041F\u043E\u043B\u0443\u0447\u0435\u043D\u043D\u044B\u0439 \u041F\u0440\u0435\u0434\u043C\u0435\u0442 ",-1),se=o("th",{scope:"col",class:"text-subtitle-2 text-wrap"}," \u041E\u0446\u0435\u043D\u043A\u0430 ",-1),oe={key:0,scope:"col",class:"text-subtitle-2 text-wrap"},ne={class:"text-high-emphasis"},re={class:"text-high-emphasis"},ce={class:"text-high-emphasis"},ue={class:"text-high-emphasis"},ie={class:"text-high-emphasis"},de={class:"text-high-emphasis"},me={key:2,class:"text-high-emphasis"},pe={colspan:"8",class:"text-center text-body-1 justify-center align-center"},ve={class:"text-sm text-disabled"},ye={__name:"index",setup(he){const _=p("created");p(!1);const O=p([{name:"\u0412 \u043F\u0440\u043E\u0446\u0435\u0441\u0441\u0435",value:"created"},{name:"\u041E\u0442\u043A\u043B\u043E\u043D\u0451\u043D\u043D\u044B\u0435",value:"not_accepted"},{name:"\u041F\u0440\u0438\u043D\u044F\u0442\u044B\u0435",value:"accepted"}]);q();const S=E(),N=L(),r=p(null),D=p(10),f=p(1),V=p(1),I=p(0),R=p({}),y=p({message:"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043C \u0434\u0430\u043D\u043D\u044B\u0435...",status:0}),g=p({enabled:!1,type:"success",message:"Hello!"});w(()=>{r.value===null?y.value={message:"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043C \u0434\u0430\u043D\u043D\u044B\u0435...",status:0}:r.value.length===0&&(y.value={message:"\u041D\u0435\u0442 \u0440\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442\u043E\u0432",status:2})}),w(()=>{r.value=null,S.fetchItems({state:_.value}).then(c=>{r.value=c.data,R.value=c.data.length>0?c.data[0]:null}).catch(c=>{g.value={enabled:!0,message:c,type:"error"},console.log(c)})}),w(()=>{f.value>V.value&&(f.value=V.value)});const U=F(()=>{const c=r.value&&r.value.length?(f.value-1)*D.value+1:0,i=r.value?r.value.length+(f.value-1)*D.value:0;return`\u041F\u043E\u043A\u0430\u0437\u0430\u043D\u044B \u0441 ${c} \u043F\u043E ${i} \u0438\u0437 ${I.value} \u0441\u0442\u0440\u043E\u043A`}),z=async(c,i)=>{S.patchItem({id:c,state:i}).then(m=>{if(console.log(m.data),r.value=r.value.filter(n=>n.id!==c),m.status>250)throw`\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u044F: ${JSON.stringify(m.data)}`;g.value={enabled:!0,message:`\u0421\u0442\u0430\u0442\u0443\u0441 \u043E\u0431\u043C\u0435\u043D\u0430 ${c} \u0438\u0437\u043C\u0435\u043D\u0451\u043D`,type:"success"}}).catch(m=>{g.value={enabled:!0,message:m,type:"error"},console.log(m)})};return(c,i)=>{const m=A("RouterLink");return t(),v("div",null,[s(H,{modelValue:a(g).enabled,"onUpdate:modelValue":i[0]||(i[0]=n=>a(g).enabled=n),location:"top end",variant:"flat",color:a(g).type},{default:e(()=>[d(x(a(g).message),1)]),_:1},8,["modelValue","color"]),s(G,{modelValue:a(_),"onUpdate:modelValue":i[1]||(i[1]=n=>T(_)?_.value=n:null),class:"mb-1"},{default:e(()=>[(t(!0),v(b,null,C(a(O),n=>(t(),u(Q,{key:n.value,value:n.value},{default:e(()=>[d(x(n.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),s(W,{flat:""},{default:e(()=>[s($,null,{default:e(()=>[s(K,{modelValue:a(_),"onUpdate:modelValue":i[3]||(i[3]=n=>T(_)?_.value=n:null)},{default:e(()=>[(t(!0),v(b,null,C(a(O),n=>(t(),u(X,{key:n.value,value:n.value},{default:e(()=>[s(Z,{class:"text-no-wrap pb-5"},{default:e(()=>[o("thead",null,[o("tr",null,[te,ae,le,se,a(_)==="created"?(t(),v("th",oe," \u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044F ")):P("",!0)])]),o("tbody",null,[(t(!0),v(b,null,C(a(r),l=>(t(),v("tr",{key:l.id,style:{height:"3.5rem"}},[o("td",ne,x(l.id),1),a(N).userData.id===l.user?(t(),v(b,{key:0},[o("td",re,[l.item1?(t(),u(m,{key:0,to:{name:"items-view-id",params:{id:l.item1.id}}},{default:e(()=>[s(h,{class:"cursor-pointer",color:"primary",variant:"tonal"},{default:e(()=>[d(" TODO ")]),_:1})]),_:2},1032,["to"])):(t(),u(h,{key:1,color:"error",variant:"tonal"},{default:e(()=>[d(" \u041D\u0438\u0447\u0435\u0433\u043E ")]),_:1}))]),o("td",ce,[l.item2?(t(),u(m,{key:0,to:{name:"items-view-id",params:{id:l.item2.id}}},{default:e(()=>[s(h,{class:"cursor-pointer",color:"primary",variant:"tonal"},{default:e(()=>[d(" TODO ")]),_:1})]),_:2},1032,["to"])):(t(),u(h,{key:1,color:"error",variant:"tonal"},{default:e(()=>[d(" \u041D\u0438\u0447\u0435\u0433\u043E ")]),_:1}))])],64)):(t(),v(b,{key:1},[o("td",ue,[l.item2?(t(),u(m,{key:0,to:{name:"items-view-id",params:{id:l.item2.id}}},{default:e(()=>[s(h,{class:"cursor-pointer",color:"primary",variant:"tonal"},{default:e(()=>[d(" TODO ")]),_:1})]),_:2},1032,["to"])):(t(),u(h,{key:1,color:"error",variant:"tonal"},{default:e(()=>[d(" \u041E\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442 ")]),_:1}))]),o("td",ie,[l.item1?(t(),u(m,{key:0,to:{name:"items-view-id",params:{id:l.item1.id}}},{default:e(()=>[s(h,{class:"cursor-pointer",color:"primary",variant:"tonal"},{default:e(()=>[d(" TODO ")]),_:1})]),_:2},1032,["to"])):(t(),u(h,{key:1,color:"error",variant:"tonal"},{default:e(()=>[d(" \u041E\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442 ")]),_:1}))])],64)),o("td",de,[s(h,{color:"warning",variant:"tonal","append-icon":"tabler-star"},{default:e(()=>[d(x(l.mark?l.mark:"-"),1)]),_:2},1024)]),l.state==="created"?(t(),v("td",me,[s(B,{icon:"",size:"x-small",color:"default",variant:"text",onClick:j=>z(l.id,"accepted")},{default:e(()=>[s(k,{size:"22",icon:"tabler-circle-check"})]),_:2},1032,["onClick"]),s(B,{icon:"",size:"x-small",color:"default",variant:"text",onClick:j=>z(l.id,"not_accepted")},{default:e(()=>[s(k,{size:"22",icon:"tabler-circle-x"})]),_:2},1032,["onClick"])])):P("",!0)]))),128))]),J(o("tfoot",null,[o("tr",null,[o("td",pe,[d(x(a(y).message)+" ",1),a(y).status===0?(t(),u(M,{key:0,width:3,color:"primary",indeterminate:""})):a(y).status===1?(t(),u(k,{key:1,color:"success",icon:"tabler-tick"})):(t(),u(k,{key:2,color:"error",icon:"tabler-x"}))])])],512),[[Y,!a(r)||!a(r).length]])]),_:1}),s($,{class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3"},{default:e(()=>[o("span",ve,x(a(U)),1),s(ee,{modelValue:a(f),"onUpdate:modelValue":i[2]||(i[2]=l=>T(f)?f.value=l:null),size:"small","total-visible":4,length:a(V)},null,8,["modelValue","length"])]),_:1})]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})])}}};export{ye as default};
