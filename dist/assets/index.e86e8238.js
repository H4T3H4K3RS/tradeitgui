import{k as u,bJ as I,v as j,w,am as E,o as c,c as x,p as s,x as r,C as b,z as d,q as t,bd as J,F as k,a as S,A as O,b0 as V,be as A,b4 as R,j as F,b as _,m as a,H,E as C,an as M,ar as W,az as q}from"./index.b1f681d3.js";import{_ as L}from"./CreateReportDialog.29003690.js";import{V as U}from"./VBtn.5ae6ddde.js";import{V as G,a as K,b as Q,c as X}from"./VTabs.acbef9b4.js";import{V as Y,a as Z}from"./VTable.61eb5754.js";import"./VTextarea.6b152d4d.js";import"./VCounter.d694b41f.js";import"./VDialog.6b93bb73.js";import"./dialog-transition.83f11d7e.js";const ee=a("thead",null,[a("tr",null,[a("th",{scope:"col",class:"text-subtitle-2 text-wrap"}," # "),a("th",{scope:"col",class:"text-subtitle-2 text-wrap"}," \u0421\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u0435 "),a("th",{scope:"col",class:"text-subtitle-2 text-wrap"}," \u0421\u0442\u0430\u0442\u0443\u0441 "),a("th",{scope:"col",class:"text-subtitle-2 text-wrap"}," \u0414\u0430\u0442\u0430 \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u044F "),a("th",{scope:"col",class:"text-subtitle-2 text-wrap"}," \u0414\u0430\u0442\u0430 \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u044F "),a("th",{scope:"col",class:"text-subtitle-2 text-wrap"}," \u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044F ")])],-1),te={class:"text-high-emphasis"},ae={class:"text-high-emphasis"},le={class:"text-high-emphasis"},se={class:"text-high-emphasis"},oe={class:"text-high-emphasis"},ne={class:"text-high-emphasis"},ue={colspan:"8",class:"text-center text-body-1 justify-center align-center"},re={class:"text-sm text-disabled"},Ve={__name:"index",setup(ie){const v=u("Pending"),g=u(!1),P=u([{name:"\u0412 \u043F\u0440\u043E\u0446\u0435\u0441\u0441\u0435",value:"Pending"},{name:"\u041E\u0442\u043A\u043B\u043E\u043D\u0451\u043D\u043D\u044B\u0435",value:"Declined"},{name:"\u041F\u0440\u0438\u043D\u044F\u0442\u044B\u0435",value:"Accepted"}]);F();const $=I();j();const i=u(null),D=u(10),m=u(1),y=u(1),z=u(0),B=u({}),f=u({message:"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043C \u0434\u0430\u043D\u043D\u044B\u0435...",status:0}),h=u({enabled:!1,type:"success",message:"Hello!"}),p=u({});w(()=>{i.value===null?f.value={message:"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043C \u0434\u0430\u043D\u043D\u044B\u0435...",status:0}:i.value.length===0&&(f.value={message:"\u041D\u0435\u0442 \u0434\u0430\u043D\u043D\u044B\u0445",status:2})}),w(()=>{i.value=null,$.fetchItems({state:v.value}).then(o=>{i.value=o.data,B.value=o.data.length>0?o.data[0]:null}).catch(o=>{h.value={enabled:!0,message:o,type:"error"},console.log(o)})}),w(()=>{m.value>y.value&&(m.value=y.value)});const N=E(()=>{const o=i.value&&i.value.length?(m.value-1)*D.value+1:0,e=i.value?i.value.length+(m.value-1)*D.value:0;return`\u041F\u043E\u043A\u0430\u0437\u0430\u043D\u044B \u0441 ${o} \u043F\u043E ${e} \u0438\u0437 ${z.value} \u0441\u0442\u0440\u043E\u043A`}),T=o=>{let e="";return typeof o=="string"?e=o:e=new Date(o*1e3).toISOString(),e.slice(0,-11).replaceAll("T"," ").replaceAll("-",".")};return w(()=>{console.log(p.value),p.value=g.value?p.value:{},console.log(p.value)}),(o,e)=>(c(),x("div",null,[s(J,{modelValue:t(h).enabled,"onUpdate:modelValue":e[0]||(e[0]=l=>t(h).enabled=l),location:"top end",variant:"flat",color:t(h).type},{default:r(()=>[b(d(t(h).message),1)]),_:1},8,["modelValue","color"]),s(G,{modelValue:t(v),"onUpdate:modelValue":e[2]||(e[2]=l=>V(v)?v.value=l:null),class:"mb-1"},{default:r(()=>[(c(!0),x(k,null,S(t(P),l=>(c(),_(Q,{key:l.value,value:l.value},{default:r(()=>[b(d(l.name),1)]),_:2},1032,["value"]))),128)),s(O),s(U,{"append-icon":"tabler-plus",onClick:e[1]||(e[1]=l=>g.value=!0)},{default:r(()=>[b(" \u0421\u043E\u0437\u0434\u0430\u0442\u044C ")]),_:1})]),_:1},8,["modelValue"]),s(R,{flat:""},{default:r(()=>[s(A,null,{default:r(()=>[s(K,{modelValue:t(v),"onUpdate:modelValue":e[4]||(e[4]=l=>V(v)?v.value=l:null)},{default:r(()=>[(c(!0),x(k,null,S(t(P),l=>(c(),_(X,{key:l.value,value:l.value},{default:r(()=>[s(Y,{class:"text-no-wrap pb-5"},{default:r(()=>[ee,a("tbody",null,[(c(!0),x(k,null,S(t(i),n=>(c(),x("tr",{key:n.id,style:{height:"3.5rem"}},[a("td",te,d(n.id),1),a("td",ae,d(n.message.slice(0,100))+" "+d(n.message.length>100?"...":""),1),a("td",le,[s(H,{variant:"tonal",color:n.state==="Accepted"?"success":n.state==="Pending"?"warning":"error"},{default:r(()=>[b(d(n.state),1)]),_:2},1032,["color"])]),a("td",se,d(T(n.time_modified)),1),a("td",oe,d(T(n.time_created)),1),a("td",ne,[s(U,{icon:"",size:"x-small",color:"default",variant:"text",onClick:ce=>{g.value=!0,p.value=JSON.parse(JSON.stringify(n))}},{default:r(()=>[s(C,{size:"22",icon:"tabler-eye"})]),_:2},1032,["onClick"])])]))),128))]),M(a("tfoot",null,[a("tr",null,[a("td",ue,[b(d(t(f).message)+" ",1),t(f).status===0?(c(),_(W,{key:0,width:3,color:"primary",indeterminate:""})):t(f).status===1?(c(),_(C,{key:1,color:"success",icon:"tabler-tick"})):(c(),_(C,{key:2,color:"error",icon:"tabler-x"}))])])],512),[[q,!t(i)||!t(i).length]])]),_:1}),s(A,{class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3"},{default:r(()=>[a("span",re,d(t(N)),1),s(Z,{modelValue:t(m),"onUpdate:modelValue":e[3]||(e[3]=n=>V(m)?m.value=n:null),size:"small","total-visible":4,length:t(y)},null,8,["modelValue","length"])]),_:1})]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),s(L,{isDialogVisible:t(g),"onUpdate:isDialogVisible":e[5]||(e[5]=l=>V(g)?g.value=l:null),report:t(p),"onUpdate:report":e[6]||(e[6]=l=>V(p)?p.value=l:null)},null,8,["isDialogVisible","report"])]))}};export{Ve as default};
