import{k as n,bl as A,v as I,w as _,am as j,o as c,c as x,p as u,x as i,C as w,z as d,q as e,bd as E,F as k,a as S,b0 as b,be as U,b4 as O,j as R,b as V,m as t,H as F,E as C,an as H,ar as J,az as W}from"./index.1ed22106.js";import{_ as q}from"./CreateReportDialog.83599d72.js";import{V as L,a as M,b as G,c as K}from"./VTabs.5c730315.js";import{V as Q,a as X}from"./VTable.39243bcd.js";import{V as Y}from"./VBtn.cd7df97a.js";import"./VTextarea.9e52da21.js";import"./VCounter.e69bdfc8.js";import"./VDialog.2d3478a7.js";import"./dialog-transition.6d1dccc2.js";const Z=t("thead",null,[t("tr",null,[t("th",{scope:"col",class:"text-subtitle-2 text-wrap"}," # "),t("th",{scope:"col",class:"text-subtitle-2 text-wrap"}," \u0421\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u0435 "),t("th",{scope:"col",class:"text-subtitle-2 text-wrap"}," \u0421\u0442\u0430\u0442\u0443\u0441 "),t("th",{scope:"col",class:"text-subtitle-2 text-wrap"}," \u0414\u0430\u0442\u0430 \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u044F "),t("th",{scope:"col",class:"text-subtitle-2 text-wrap"}," \u0414\u0430\u0442\u0430 \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u044F "),t("th",{scope:"col",class:"text-subtitle-2 text-wrap"}," \u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044F ")])],-1),ee={class:"text-high-emphasis"},te={class:"text-high-emphasis"},ae={class:"text-high-emphasis"},le={class:"text-high-emphasis"},se={class:"text-high-emphasis"},oe={class:"text-high-emphasis"},ne={colspan:"8",class:"text-center text-body-1 justify-center align-center"},ue={class:"text-sm text-disabled"},be={__name:"index",setup(re){const v=n("Pending"),g=n(!1),P=n([{name:"\u0412 \u043F\u0440\u043E\u0446\u0435\u0441\u0441\u0435",value:"created"},{name:"\u041E\u0442\u043A\u043B\u043E\u043D\u0451\u043D\u043D\u044B\u0435",value:"not_accepted"},{name:"\u041F\u0440\u0438\u043D\u044F\u0442\u044B\u0435",value:"accepted"}]);R();const z=A();I();const r=n(null),D=n(10),m=n(1),y=n(1),B=n(0),N=n({}),f=n({message:"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043C \u0434\u0430\u043D\u043D\u044B\u0435...",status:0}),h=n({enabled:!1,type:"success",message:"Hello!"}),p=n({});_(()=>{r.value===null?f.value={message:"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043C \u0434\u0430\u043D\u043D\u044B\u0435...",status:0}:r.value.length===0&&(f.value={message:"\u041D\u0435\u0442 \u0434\u0430\u043D\u043D\u044B\u0445",status:2})}),_(()=>{r.value=null,z.fetchItems({state:v.value}).then(s=>{r.value=s.data,N.value=s.data.length>0?s.data[0]:null}).catch(s=>{h.value={enabled:!0,message:s,type:"error"},console.log(s)})}),_(()=>{m.value>y.value&&(m.value=y.value)});const $=j(()=>{const s=r.value&&r.value.length?(m.value-1)*D.value+1:0,a=r.value?r.value.length+(m.value-1)*D.value:0;return`\u041F\u043E\u043A\u0430\u0437\u0430\u043D\u044B \u0441 ${s} \u043F\u043E ${a} \u0438\u0437 ${B.value} \u0441\u0442\u0440\u043E\u043A`}),T=s=>{let a="";return typeof s=="string"?a=s:a=new Date(s*1e3).toISOString(),a.slice(0,-11).replaceAll("T"," ").replaceAll("-",".")};return _(()=>{console.log(p.value),p.value=g.value?p.value:{},console.log(p.value)}),(s,a)=>(c(),x("div",null,[u(E,{modelValue:e(h).enabled,"onUpdate:modelValue":a[0]||(a[0]=l=>e(h).enabled=l),location:"top end",variant:"flat",color:e(h).type},{default:i(()=>[w(d(e(h).message),1)]),_:1},8,["modelValue","color"]),u(L,{modelValue:e(v),"onUpdate:modelValue":a[1]||(a[1]=l=>b(v)?v.value=l:null),class:"mb-1"},{default:i(()=>[(c(!0),x(k,null,S(e(P),l=>(c(),V(G,{key:l.value,value:l.value},{default:i(()=>[w(d(l.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),u(O,{flat:""},{default:i(()=>[u(U,null,{default:i(()=>[u(M,{modelValue:e(v),"onUpdate:modelValue":a[3]||(a[3]=l=>b(v)?v.value=l:null)},{default:i(()=>[(c(!0),x(k,null,S(e(P),l=>(c(),V(K,{key:l.value,value:l.value},{default:i(()=>[u(Q,{class:"text-no-wrap pb-5"},{default:i(()=>[Z,t("tbody",null,[(c(!0),x(k,null,S(e(r),o=>(c(),x("tr",{key:o.id,style:{height:"3.5rem"}},[t("td",ee,d(o.id),1),t("td",te,d(o.message.slice(0,100))+" "+d(o.message.length>100?"...":""),1),t("td",ae,[u(F,{variant:"tonal",color:o.state==="Accepted"?"success":o.state==="Pending"?"warning":"error"},{default:i(()=>[w(d(o.state),1)]),_:2},1032,["color"])]),t("td",le,d(T(o.time_modified)),1),t("td",se,d(T(o.time_created)),1),t("td",oe,[u(Y,{icon:"",size:"x-small",color:"default",variant:"text",onClick:ie=>{g.value=!0,p.value=JSON.parse(JSON.stringify(o))}},{default:i(()=>[u(C,{size:"22",icon:"tabler-eye"})]),_:2},1032,["onClick"])])]))),128))]),H(t("tfoot",null,[t("tr",null,[t("td",ne,[w(d(e(f).message)+" ",1),e(f).status===0?(c(),V(J,{key:0,width:3,color:"primary",indeterminate:""})):e(f).status===1?(c(),V(C,{key:1,color:"success",icon:"tabler-tick"})):(c(),V(C,{key:2,color:"error",icon:"tabler-x"}))])])],512),[[W,!e(r)||!e(r).length]])]),_:1}),u(U,{class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3"},{default:i(()=>[t("span",ue,d(e($)),1),u(X,{modelValue:e(m),"onUpdate:modelValue":a[2]||(a[2]=o=>b(m)?m.value=o:null),size:"small","total-visible":4,length:e(y)},null,8,["modelValue","length"])]),_:1})]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),u(q,{isDialogVisible:e(g),"onUpdate:isDialogVisible":a[4]||(a[4]=l=>b(g)?g.value=l:null),report:e(p),"onUpdate:report":a[5]||(a[5]=l=>b(p)?p.value=l:null)},null,8,["isDialogVisible","report"])]))}};export{be as default};
