import{k as r,bo as N,v as R,w as y,aw as O,o as c,c as x,p as s,x as o,C as V,z as d,q as t,ax as q,ar as $,af as b,F as D,a as P,D as j,aq as E,ay as z,am as F,j as H,b as _,m as a,H as J,G as S,a9 as W,az as G,aa as L}from"./index.6ab7cdf7.js";import{_ as M}from"./CreateReportDialog.64923ef9.js";import{V as K,a as Q,b as X,c as Y}from"./VTabs.e470ff33.js";import{V as Z,a as ee}from"./VTable.53fb913f.js";import"./DialogCloseBtn.4e060ce6.js";import"./VTextarea.39ee5f20.js";import"./VDialog.e302173b.js";const te=a("thead",null,[a("tr",null,[a("th",{scope:"col",class:"text-subtitle-2 text-wrap"}," # "),a("th",{scope:"col",class:"text-subtitle-2 text-wrap"}," \u0421\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u0435 "),a("th",{scope:"col",class:"text-subtitle-2 text-wrap"}," \u0421\u0442\u0430\u0442\u0443\u0441 "),a("th",{scope:"col",class:"text-subtitle-2 text-wrap"}," \u0414\u0430\u0442\u0430 \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u044F "),a("th",{scope:"col",class:"text-subtitle-2 text-wrap"}," \u0414\u0430\u0442\u0430 \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u044F "),a("th",{scope:"col",class:"text-subtitle-2 text-wrap"}," \u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044F ")])],-1),ae={class:"text-high-emphasis"},le={class:"text-high-emphasis"},se={class:"text-high-emphasis"},oe={class:"text-high-emphasis"},ue={class:"text-high-emphasis"},ne={class:"text-high-emphasis"},re={colspan:"8",class:"text-center text-body-1 justify-center align-center"},ie={class:"text-sm text-disabled"},Ve={__name:"index",setup(ce){const v=r("Pending"),f=r(!1),T=r([{name:"\u0412 \u043F\u0440\u043E\u0446\u0435\u0441\u0441\u0435",value:"Pending"},{name:"\u041E\u0442\u043A\u043B\u043E\u043D\u0451\u043D\u043D\u044B\u0435",value:"Declined"},{name:"\u041F\u0440\u0438\u043D\u044F\u0442\u044B\u0435",value:"Accepted"}]);H();const A=N();R();const i=r(null),k=r(10),m=r(1),w=r(1),C=r(0),B=r({}),g=r({message:"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043C \u0434\u0430\u043D\u043D\u044B\u0435...",status:0}),h=r({enabled:!1,type:"success",message:"Hello!"}),p=r({});y(()=>{i.value===null?g.value={message:"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043C \u0434\u0430\u043D\u043D\u044B\u0435...",status:0}:i.value.length===0&&(g.value={message:"\u041D\u0435\u0442 \u0440\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442\u043E\u0432",status:2})}),y(()=>{i.value=null,A.fetchItems({state:v.value}).then(u=>{i.value=u.data.results,B.value=u.data.results.length>0?u.data.results[0]:null,C.value=u.data.count,w.value=parseInt(C.value/k.value)+1}).catch(u=>{h.value={enabled:!0,message:u,type:"error"},console.log(u)})}),y(()=>{m.value>w.value&&(m.value=w.value)});const I=O(()=>{const u=i.value&&i.value.length?(m.value-1)*k.value+1:0,e=i.value?i.value.length+(m.value-1)*k.value:0;return`\u041F\u043E\u043A\u0430\u0437\u0430\u043D\u044B \u0441 ${u} \u043F\u043E ${e} \u0438\u0437 ${C.value} \u0441\u0442\u0440\u043E\u043A`}),U=u=>{let e="";return typeof u=="string"?e=u:e=new Date(u*1e3).toISOString(),e.slice(0,-11).replaceAll("T"," ").replaceAll("-",".")};return y(()=>{console.log(p.value),p.value=f.value?p.value:{},console.log(p.value)}),(u,e)=>(c(),x("div",null,[s(q,{modelValue:t(h).enabled,"onUpdate:modelValue":e[0]||(e[0]=l=>t(h).enabled=l),location:"bottom end",variant:"flat",color:t(h).type},{default:o(()=>[V(d(t(h).message),1)]),_:1},8,["modelValue","color"]),s(E,null,{default:o(()=>[s($,{cols:"12",sm:"8",class:"w-100 d-flex d-md-block justify-center justify-md-start"},{default:o(()=>[s(K,{modelValue:t(v),"onUpdate:modelValue":e[1]||(e[1]=l=>b(v)?v.value=l:null),class:"mb-1"},{default:o(()=>[(c(!0),x(D,null,P(t(T),l=>(c(),_(X,{key:l.value,value:l.value},{default:o(()=>[V(d(l.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),s($,{cols:"12",sm:"4"},{default:o(()=>[s(j,{class:"w-100","append-icon":"tabler-circle-plus",onClick:e[2]||(e[2]=l=>f.value=!0)},{default:o(()=>[V(" \u0421\u043E\u0437\u0434\u0430\u0442\u044C ")]),_:1})]),_:1})]),_:1}),s(F,{flat:""},{default:o(()=>[s(z,null,{default:o(()=>[s(Q,{modelValue:t(v),"onUpdate:modelValue":e[4]||(e[4]=l=>b(v)?v.value=l:null),touch:{left:null,right:null}},{default:o(()=>[(c(!0),x(D,null,P(t(T),l=>(c(),_(Y,{key:l.value,value:l.value},{default:o(()=>[s(Z,{class:"text-no-wrap pb-5"},{default:o(()=>[te,a("tbody",null,[(c(!0),x(D,null,P(t(i),n=>(c(),x("tr",{key:n.id,style:{height:"3.5rem"}},[a("td",ae,d(n.id),1),a("td",le,d(n.message.slice(0,40))+" "+d(n.message.length>40?"...":""),1),a("td",se,[s(J,{variant:"tonal",color:n.state==="Accepted"?"success":n.state==="Pending"?"warning":"error"},{default:o(()=>[V(d(n.state),1)]),_:2},1032,["color"])]),a("td",oe,d(U(n.time_modified)),1),a("td",ue,d(U(n.time_created)),1),a("td",ne,[s(j,{icon:"",size:"x-small",color:"default",variant:"text",onClick:de=>{f.value=!0,p.value=JSON.parse(JSON.stringify(n))}},{default:o(()=>[s(S,{size:"22",icon:"tabler-eye"})]),_:2},1032,["onClick"])])]))),128))]),W(a("tfoot",null,[a("tr",null,[a("td",re,[V(d(t(g).message)+" ",1),t(g).status===0?(c(),_(G,{key:0,width:3,color:"primary",indeterminate:""})):t(g).status===1?(c(),_(S,{key:1,color:"success",icon:"tabler-tick"})):(c(),_(S,{key:2,color:"error",icon:"tabler-x"}))])])],512),[[L,!t(i)||!t(i).length]])]),_:1}),s(z,{class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3"},{default:o(()=>[a("span",ie,d(t(I)),1),s(ee,{modelValue:t(m),"onUpdate:modelValue":e[3]||(e[3]=n=>b(m)?m.value=n:null),size:"small","total-visible":4,length:t(w)},null,8,["modelValue","length"])]),_:1})]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),s(M,{isDialogVisible:t(f),"onUpdate:isDialogVisible":e[5]||(e[5]=l=>b(f)?f.value=l:null),report:t(p),"onUpdate:report":e[6]||(e[6]=l=>b(p)?p.value=l:null)},null,8,["isDialogVisible","report"])]))}};export{Ve as default};
