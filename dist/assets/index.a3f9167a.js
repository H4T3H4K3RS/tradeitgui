import{k as r,bm as R,v as I,w,am as E,o as c,c as b,p as s,x as o,C as x,z as d,q as t,bd as O,b9 as U,b0 as V,F as k,a as C,b8 as F,be as $,b4 as H,j as J,b as _,m as a,H as W,E as P,an as q,ar as L,az as M}from"./index.17329d69.js";import{_ as G}from"./CreateReportDialog.748a4f3d.js";import{V as K,a as Q,b as X,c as Y}from"./VTabs.3f6c487d.js";import{V as j}from"./VBtn.b08178d6.js";import{V as Z,a as ee}from"./VTable.98eeb317.js";import"./VTextarea.9e67cced.js";import"./VCounter.9fdac173.js";import"./VDialog.e2f7c479.js";import"./dialog-transition.d34d8819.js";const te=a("thead",null,[a("tr",null,[a("th",{scope:"col",class:"text-subtitle-2 text-wrap"}," # "),a("th",{scope:"col",class:"text-subtitle-2 text-wrap"}," \u0421\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u0435 "),a("th",{scope:"col",class:"text-subtitle-2 text-wrap"}," \u0421\u0442\u0430\u0442\u0443\u0441 "),a("th",{scope:"col",class:"text-subtitle-2 text-wrap"}," \u0414\u0430\u0442\u0430 \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u044F "),a("th",{scope:"col",class:"text-subtitle-2 text-wrap"}," \u0414\u0430\u0442\u0430 \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u044F "),a("th",{scope:"col",class:"text-subtitle-2 text-wrap"}," \u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044F ")])],-1),ae={class:"text-high-emphasis"},le={class:"text-high-emphasis"},se={class:"text-high-emphasis"},oe={class:"text-high-emphasis"},ne={class:"text-high-emphasis"},ue={class:"text-high-emphasis"},re={colspan:"8",class:"text-center text-body-1 justify-center align-center"},ie={class:"text-sm text-disabled"},_e={__name:"index",setup(ce){const m=r("Pending"),f=r(!1),S=r([{name:"\u0412 \u043F\u0440\u043E\u0446\u0435\u0441\u0441\u0435",value:"Pending"},{name:"\u041E\u0442\u043A\u043B\u043E\u043D\u0451\u043D\u043D\u044B\u0435",value:"Declined"},{name:"\u041F\u0440\u0438\u043D\u044F\u0442\u044B\u0435",value:"Accepted"}]);J();const z=R();I();const i=r(null),D=r(10),v=r(1),y=r(1),A=r(0),B=r({}),g=r({message:"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043C \u0434\u0430\u043D\u043D\u044B\u0435...",status:0}),h=r({enabled:!1,type:"success",message:"Hello!"}),p=r({});w(()=>{i.value===null?g.value={message:"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043C \u0434\u0430\u043D\u043D\u044B\u0435...",status:0}:i.value.length===0&&(g.value={message:"\u041D\u0435\u0442 \u0434\u0430\u043D\u043D\u044B\u0445",status:2})}),w(()=>{i.value=null,z.fetchItems({state:m.value}).then(n=>{i.value=n.data,B.value=n.data.length>0?n.data[0]:null}).catch(n=>{h.value={enabled:!0,message:n,type:"error"},console.log(n)})}),w(()=>{v.value>y.value&&(v.value=y.value)});const N=E(()=>{const n=i.value&&i.value.length?(v.value-1)*D.value+1:0,e=i.value?i.value.length+(v.value-1)*D.value:0;return`\u041F\u043E\u043A\u0430\u0437\u0430\u043D\u044B \u0441 ${n} \u043F\u043E ${e} \u0438\u0437 ${A.value} \u0441\u0442\u0440\u043E\u043A`}),T=n=>{let e="";return typeof n=="string"?e=n:e=new Date(n*1e3).toISOString(),e.slice(0,-11).replaceAll("T"," ").replaceAll("-",".")};return w(()=>{console.log(p.value),p.value=f.value?p.value:{},console.log(p.value)}),(n,e)=>(c(),b("div",null,[s(O,{modelValue:t(h).enabled,"onUpdate:modelValue":e[0]||(e[0]=l=>t(h).enabled=l),location:"top end",variant:"flat",color:t(h).type},{default:o(()=>[x(d(t(h).message),1)]),_:1},8,["modelValue","color"]),s(F,null,{default:o(()=>[s(U,{cols:"12",sm:"8",class:"w-100 d-flex d-md-block justify-center justify-md-start"},{default:o(()=>[s(K,{modelValue:t(m),"onUpdate:modelValue":e[1]||(e[1]=l=>V(m)?m.value=l:null),class:"mb-1"},{default:o(()=>[(c(!0),b(k,null,C(t(S),l=>(c(),_(X,{key:l.value,value:l.value},{default:o(()=>[x(d(l.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),s(U,{cols:"12",sm:"4"},{default:o(()=>[s(j,{class:"w-100","append-icon":"tabler-circle-plus",onClick:e[2]||(e[2]=l=>f.value=!0)},{default:o(()=>[x(" \u0421\u043E\u0437\u0434\u0430\u0442\u044C ")]),_:1})]),_:1})]),_:1}),s(H,{flat:""},{default:o(()=>[s($,null,{default:o(()=>[s(Q,{modelValue:t(m),"onUpdate:modelValue":e[4]||(e[4]=l=>V(m)?m.value=l:null)},{default:o(()=>[(c(!0),b(k,null,C(t(S),l=>(c(),_(Y,{key:l.value,value:l.value},{default:o(()=>[s(Z,{class:"text-no-wrap pb-5"},{default:o(()=>[te,a("tbody",null,[(c(!0),b(k,null,C(t(i),u=>(c(),b("tr",{key:u.id,style:{height:"3.5rem"}},[a("td",ae,d(u.id),1),a("td",le,d(u.message.slice(0,40))+" "+d(u.message.length>40?"...":""),1),a("td",se,[s(W,{variant:"tonal",color:u.state==="Accepted"?"success":u.state==="Pending"?"warning":"error"},{default:o(()=>[x(d(u.state),1)]),_:2},1032,["color"])]),a("td",oe,d(T(u.time_modified)),1),a("td",ne,d(T(u.time_created)),1),a("td",ue,[s(j,{icon:"",size:"x-small",color:"default",variant:"text",onClick:de=>{f.value=!0,p.value=JSON.parse(JSON.stringify(u))}},{default:o(()=>[s(P,{size:"22",icon:"tabler-eye"})]),_:2},1032,["onClick"])])]))),128))]),q(a("tfoot",null,[a("tr",null,[a("td",re,[x(d(t(g).message)+" ",1),t(g).status===0?(c(),_(L,{key:0,width:3,color:"primary",indeterminate:""})):t(g).status===1?(c(),_(P,{key:1,color:"success",icon:"tabler-tick"})):(c(),_(P,{key:2,color:"error",icon:"tabler-x"}))])])],512),[[M,!t(i)||!t(i).length]])]),_:1}),s($,{class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3"},{default:o(()=>[a("span",ie,d(t(N)),1),s(ee,{modelValue:t(v),"onUpdate:modelValue":e[3]||(e[3]=u=>V(v)?v.value=u:null),size:"small","total-visible":4,length:t(y)},null,8,["modelValue","length"])]),_:1})]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),s(G,{isDialogVisible:t(f),"onUpdate:isDialogVisible":e[5]||(e[5]=l=>V(f)?f.value=l:null),report:t(p),"onUpdate:report":e[6]||(e[6]=l=>V(p)?p.value=l:null)},null,8,["isDialogVisible","report"])]))}};export{_e as default};
